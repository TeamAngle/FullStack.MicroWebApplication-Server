{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/tag.service\";\nimport * as i2 from \"src/app/services/blog-post.service\";\nimport * as i3 from \"src/app/app.component\";\nimport * as i4 from \"../header/header.component\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../footer/footer.component\";\nexport let CreateBlogComponent = /*#__PURE__*/(() => {\n  class CreateBlogComponent {\n    constructor(tagService, blogService, app) {\n      this.tagService = tagService;\n      this.blogService = blogService;\n      this.app = app;\n      this.title = \"\";\n      this.body = \"\";\n      this.recipe = \"\";\n      this.imgUrl = \"\";\n      this.tags = \"\";\n    }\n\n    ngOnInit() {\n      this.getTags();\n    }\n\n    onSubmit() {\n      if (!this.hasRequiredFields()) return;\n      console.log('has required fields');\n      this.addBlogPost(this.convertToBlogPost());\n    }\n\n    hasRequiredFields() {\n      return this.title.length > 0 && this.body.length > 0;\n    }\n\n    convertToLowerCase(text) {\n      this.tags = this.tags.toLowerCase();\n    }\n\n    convertToBlogPost() {\n      let blogPost = {\n        id: 0,\n        title: this.title,\n        content: this.body,\n        recipe: this.recipe,\n        imageUrl: this.imgUrl,\n        tags: this.createTags(),\n        user: this.app.user\n      };\n      console.log(blogPost);\n      return blogPost;\n    }\n\n    addBlogPost(blogPost) {\n      this.blogService.addBlogPost(blogPost).subscribe(response => {\n        console.log(response);\n      });\n      this.addTags();\n      this.clearFields();\n    }\n\n    addTags() {\n      let tagList = this.tags.split(',');\n      let convertedTag = {};\n      let uniqueNames = this.tagList.map(tag => tag.name);\n\n      for (let tag of tagList) {\n        if (uniqueNames.indexOf(tag) >= 0) continue;\n        convertedTag = {\n          name: tag\n        };\n        this.tagService.addTag(convertedTag).subscribe(() => {\n          console.log('completed add tag');\n        });\n      }\n    }\n\n    getTags() {\n      this.tagService.getTags().subscribe(tags => {\n        this.tagList = tags;\n      });\n    }\n\n    clearFields() {\n      this.title = \"\";\n      this.tags = \"\";\n      this.body = \"\";\n      this.imgUrl = \"\";\n      this.recipe = \"\";\n    }\n\n    createTags() {\n      let tagNames = this.tags.split(',');\n      let tagList = [];\n      tagNames.forEach(tagName => {\n        tagList.push({\n          name: tagName\n        });\n      });\n      return tagList;\n    }\n\n  }\n\n  CreateBlogComponent.ɵfac = function CreateBlogComponent_Factory(t) {\n    return new (t || CreateBlogComponent)(i0.ɵɵdirectiveInject(i1.TagService), i0.ɵɵdirectiveInject(i2.BlogPostService), i0.ɵɵdirectiveInject(i3.AppComponent));\n  };\n\n  CreateBlogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateBlogComponent,\n    selectors: [[\"app-create-blog\"]],\n    decls: 42,\n    vars: 6,\n    consts: [[1, \"inputForm\"], [1, \"title\"], [\"for\", \"title\"], [\"type\", \"text\", \"name\", \"title\", 1, \"small-text\", 3, \"ngModel\", \"ngModelChange\"], [1, \"image\"], [\"for\", \"image\"], [\"type\", \"text\", \"name\", \"imageUrl\", 1, \"image-text\", 3, \"ngModel\", \"ngModelChange\"], [3, \"src\"], [1, \"body\"], [\"for\", \"body\"], [\"rows\", \"15\", \"cols\", \"70\", \"id\", \"multiLineInput\", 3, \"ngModel\", \"ngModelChange\"], [1, \"recipe\"], [\"for\", \"recipe\"], [\"rows\", \"5\", \"cols\", \"40\", \"id\", \"multiLineInput\", 3, \"ngModel\", \"ngModelChange\"], [1, \"tags\"], [\"for\", \"tags\"], [\"type\", \"text\", \"name\", \"tags\", 1, \"small-text\", 3, \"ngModel\", \"ngModelChange\"], [1, \"submit\"], [\"type\", \"submit\", \"name\", \"submit\", 3, \"click\"]],\n    template: function CreateBlogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"form\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"label\", 2);\n        i0.ɵɵtext(4, \"Post Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateBlogComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.title = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 4);\n        i0.ɵɵelementStart(10, \"label\", 5);\n        i0.ɵɵtext(11, \"Image Url\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵelementStart(13, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateBlogComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.imgUrl = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"br\");\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelement(16, \"img\", 7);\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 8);\n        i0.ɵɵelementStart(19, \"label\", 9);\n        i0.ɵɵtext(20, \"Body\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"textarea\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateBlogComponent_Template_textarea_ngModelChange_22_listener($event) {\n          return ctx.body = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"br\");\n        i0.ɵɵelement(24, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 11);\n        i0.ɵɵelementStart(26, \"label\", 12);\n        i0.ɵɵtext(27, \"Recipe Instructions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"br\");\n        i0.ɵɵelementStart(29, \"textarea\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateBlogComponent_Template_textarea_ngModelChange_29_listener($event) {\n          return ctx.recipe = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 14);\n        i0.ɵɵelementStart(33, \"label\", 15);\n        i0.ɵɵtext(34, \"Tags\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"br\");\n        i0.ɵɵelementStart(36, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateBlogComponent_Template_input_ngModelChange_36_listener($event) {\n          return ctx.tags = $event;\n        })(\"ngModelChange\", function CreateBlogComponent_Template_input_ngModelChange_36_listener($event) {\n          return ctx.convertToLowerCase($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"br\");\n        i0.ɵɵelement(38, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 17);\n        i0.ɵɵelementStart(40, \"input\", 18);\n        i0.ɵɵlistener(\"click\", function CreateBlogComponent_Template_input_click_40_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"app-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.title);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.imgUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.imgUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.body);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.recipe);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.tags);\n      }\n    },\n    directives: [i4.HeaderComponent, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.FooterComponent],\n    styles: [\".inputForm[_ngcontent-%COMP%]{margin-bottom:60px;padding-bottom:5vh;padding-top:5vh;background-color:#f5f2ee;width:100vw;position:relative;display:flex;flex-direction:column;margin-left:-50vw;left:50%;font-family:\\\"UnJamoBatang\\\",sans-serif}label[_ngcontent-%COMP%]{margin-left:10%}.small-text[_ngcontent-%COMP%]{height:20px;width:65%;position:absolute;margin-left:25%}.image-text[_ngcontent-%COMP%]{height:20px;width:30%;position:absolute;margin-left:25%}textarea[_ngcontent-%COMP%]{height:10vh;width:65%;position:absolute;margin-left:25%;padding-bottom:5%;white-space:pre-wrap}.title[_ngcontent-%COMP%]{display:flex;position:relative}.image[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:2%}.body[_ngcontent-%COMP%]{display:flex;height:20vh;padding-bottom:2%}.recipe[_ngcontent-%COMP%]{display:flex;height:20vh;padding-bottom:2%}.tags[_ngcontent-%COMP%]{display:flex}.submit[_ngcontent-%COMP%]{width:10vh;height:20px;padding-left:50%}img[_ngcontent-%COMP%]{height:30vh}\", \"@import url('http://fonts.cdnfonts.com/css/unjamobatang');\"]\n  });\n  return CreateBlogComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}